//using dense_rank function:
select d.Name as Department, a. Name as Employee, a. Salary 
from (
select e.*, dense_rank() over (partition by DepartmentId order by Salary desc) as DeptPayRank 
from Employee e 
) a 
join Department d
on a. DepartmentId = d. Id 
where DeptPayRank <=3


//if not using dense rank function: 
select
    d.Name 'Department', e1.Name 'Employee', e1.Salary
from
    Employee e1
        join
    Department d on e1.DepartmentId = d.Id
where
    3 > (select
            count(DISTINCT e2.Salary)
        from
            Employee e2
        where
            e2.Salary > e1.Salary
        and e1.DepartmentId = e2.DepartmentId
        )
